<!DOCTYPE html>
<html lang="en">
    <head>
        <title>ToDo-DOM</title>
    </head>
    <body>
        <h2>To Do - using DOM Manipulation</h2>
        <br />
        <br />
        <input id="title" type="text" placeholder="Title" />
        <br />
        <textarea
            id="discription"
            cols="17"
            rows="3"
            placeholder="Description"
        ></textarea>
        <br />
        <button onclick="addTask()">Add Task</button>
        <br /><br />
        <div id="task-container"></div>

        <script>
            let globalId = 1;
            function markAsDoneAction(id) {
                const parent = document.getElementById(id);
                // strikethrough the text
                parent.children[0].innerHTML = `<s>${parent.children[0].innerHTML}<s>`;
                parent.children[1].innerHTML = `<s>${parent.children[1].innerHTML}<s>`;
                parent.children[2].innerHTML = "Completed!";
            }
            function createChildsStructure(title, discription, id) {
                const child = document.createElement("div");
                const grandChild1 = document.createElement("div");
                grandChild1.innerHTML = title;
                const grandChild2 = document.createElement("div");
                grandChild2.innerHTML = discription;
                const grandChild3 = document.createElement("button");
                grandChild3.innerHTML = "Mark as done";
                grandChild3.setAttribute("onclick", `markAsDoneAction(${id})`);
                child.appendChild(grandChild1);
                child.appendChild(grandChild2);
                child.appendChild(grandChild3);
                child.setAttribute("id", id);
                return child;
            }
            function addTask() {
                const title = document.getElementById("title").value;
                const disc = document.getElementById("discription").value;
                const parent = document.getElementById("task-container");
                parent.appendChild(
                    createChildsStructure(title, disc, globalId++)
                );
            }
        </script>
    </body>
</html>
